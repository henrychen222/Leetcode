/**
 * 04/29/22 morning
 * https://leetcode.com/problems/image-overlap/
 */

const pr = console.log;

// Accepted --- 4517ms 10.00%
const largestOverlap = (g1, g2) => {
    let n = g1.length, d = [];
    for (let i = 0; i < n; i++) {
        for (let j = 0; j < n; j++) {
            if (g1[i][j] == 1) d.push([i, j]);
        }
    }
    // pr(d);
    if (d.length == 0) return 0;
    let [x, y] = d[0], res = 0;
    for (let i = -1; i < n; i++) {
        for (let j = -1; j < n; j++) { // each [i, j] as topLeft point
            let moveX = i - x, moveY = j - y;
            let t = d.map(e => [e[0] + moveX, e[1] + moveY]);
            let cnt = overlap(t, g2);
            // pr(t, cnt);
            res = Math.max(res, cnt);
        }
    }
    return res;
};

const overlap = (d, g) => {
    let n = g.length, cnt = 0;
    for (let i = 0; i < n; i++) {
        for (let j = 0; j < n; j++) {
            if (g[i][j] == 1) {
                if (d.some(x => x[0] == i && x[1] == j)) cnt++;
            }
        }
    }
    return cnt;
};

const main = () => {
    let img1 = [
            [1, 1, 0],
            [0, 1, 0],
            [0, 1, 0]
        ],
        img2 = [
            [0, 0, 0],
            [0, 1, 1],
            [0, 0, 1]
        ]
    let img1_2 = [
            [1]
        ],
        img2_2 = [
            [1]
        ];
    let img1_3 = [
            [0]
        ],
        img2_3 = [
            [0]
        ]
    let img1_debug1 = [[1,1,1,0,1,0,1,1,1,1,1,1,1,0,1],[1,1,1,1,0,0,1,1,1,1,1,0,1,0,0],[0,1,1,0,1,1,1,0,1,1,1,0,1,1,1],[0,1,0,1,0,1,0,1,1,1,1,1,1,1,0],[1,1,1,1,1,0,0,0,1,1,1,0,1,1,0],[0,1,0,0,1,0,0,1,1,1,1,1,1,1,0],[1,1,1,0,1,1,1,1,1,0,1,0,1,0,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[0,0,0,1,1,1,0,1,1,0,1,1,1,1,1],[1,0,1,0,0,1,1,1,1,1,1,1,0,1,0],[1,1,1,1,1,0,0,1,1,0,0,1,1,1,1],[0,1,1,1,0,1,1,1,0,1,1,0,1,0,1],[1,1,0,1,1,0,1,0,1,1,1,1,1,0,1],[0,1,1,1,1,1,0,1,1,1,0,1,1,0,1],[0,1,0,1,1,0,1,1,1,0,1,1,1,0,1]],
    img2_debug1 = [[1,0,0,1,1,1,1,1,1,1,1,0,1,0,0],[1,0,0,1,0,1,1,1,1,0,1,1,0,1,1],[1,1,1,1,1,1,1,1,0,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,0,0,1,0,0,0],[0,1,1,1,0,1,0,0,1,1,0,1,0,1,0],[1,1,1,1,1,1,1,1,0,1,1,1,0,1,1],[1,1,0,1,1,1,1,0,0,1,0,0,1,0,0],[1,1,1,0,0,1,1,1,1,1,1,1,1,1,0],[1,0,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,0,1,1,1,1,1,1,1,1,1,1,0],[1,1,1,0,1,0,0,1,1,1,1,0,0,1,0],[1,1,1,0,0,1,1,0,1,1,1,1,1,0,1],[1,1,1,1,1,1,1,1,1,0,1,0,1,1,1],[1,1,1,1,1,1,0,0,1,0,1,1,0,0,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,0]]
    pr(largestOverlap(img1, img2));
    pr(largestOverlap(img1_2, img2_2));
    pr(largestOverlap(img1_3, img2_3));
    pr(largestOverlap(img1_debug1, img2_debug1)); // 122
};

main()