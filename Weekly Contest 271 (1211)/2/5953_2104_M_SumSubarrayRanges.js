/**
 * 12/11/21 evening
 * https://leetcode.com/contest/weekly-contest-271/problems/sum-of-subarray-ranges/
 */

const pr = console.log;

// TLE
const subArrayRanges1 = (a) => {
    let n = a.length, res = 0;
    for (let i = 0; i < n; i++) {
        for (let j = i; j < n; j++) {
            let min = Number.MAX_SAFE_INTEGER, max = Number.MIN_SAFE_INTEGER;
            let sub = a.slice(i, j + 1);
            for (const x of sub) {
                min = Math.min(min, x);
                max = Math.max(max, x);
            }
            // pr(sub, min, max);
            res += max - min;
        }
    }
    return res;
};

const subArrayRanges2 = (a) => {
    let n = a.length, res = 0;
    let [A, B] = preMaxMin(a);
    pr(A, B);
    for (let i = 0; i < n; i++) {
        for (let j = i; j < n; j++) {
            let sub = a.slice(i, j + 1);
            let len = j - i + 1;
            if (len <= 1) continue;
            // let max = A[j], min = B[j];
            // let max = Math.max(A[i], A[j + 1]), min = Math.min(B[i], B[j + 1]);
            let max = Math.max(A[i], A[j]), min = Math.min(B[i], B[j]);
            pr("i", i, "j", j, "len", len, sub, "min", min, "max", max, "add", max - min);
            res += max - min;
        }
    }
    return res;
};

const preMaxMin = (a) => {
    let n = a.length, A = [], B = [], max = Number.MIN_SAFE_INTEGER, min = Number.MAX_SAFE_INTEGER;
    for (let i = 0; i < n; i++) {
        if (a[i] > max) max = a[i];
        if (a[i] < min) min = a[i];
        A.push(max);
        B.push(min);
    }
    // A.unshift(0);
    // B.unshift(0);
    return [A, B];
};

// Accepted
const subArrayRanges = (a) => {
    let n = a.length, res = 0;
    for (let i = 0; i < n; i++) {
        let min = Number.MAX_SAFE_INTEGER, max = Number.MIN_SAFE_INTEGER;
        for (let j = i; j < n; j++) {
            min = Math.min(min, a[j]);
            max = Math.max(max, a[j]);
            // let sub = a.slice(i, j + 1);
            // pr(sub, min, max);
            res += max - min;
        }
    }
    return res;
};

const main = () => {
    let nums = [1, 2, 3];
    let nums2 = [1, 3, 3];
    let nums3 = [4, -2, -3, 4, 1];
    let debug1 = [-422409444,-876491459,-145690215,380779332,165146478,876200374,49657273,-935510572,563731892,253389369,-832461766,-797508343,825271536,-40246345,583094490,-352633339,353317084,-705662817,227058166,-34117667,-980912554,297490771,423775446,681817651,806605489,11873319,906787587,233796740,-710420116,-566125976,-245767006,537627144,687008016,503012073,402034709,995164973,-675408,-995761946,872828949,355817159,-571272769,423590019,677656911,-299280559,833253882,665651677,265532425,-317219437,310249476,201707649,-309683202,719098221,-899910995,-764826688,-467325006,-491658466,805574747,-827758292,483995372,-663710431,-415262313,-597767363,485286779,-768344642,169915789,585140753,-825361208,-50299205,379805739,493095099,-312368513,-890301363,-749769213,970717801,-136739734,-169469583,-245723692,-805027688,-544607901,-495212702,113371449,-767555115,438348778,393675096,-182427730,-327247537,795478602,44638217,-5076134,498576283,574702850,383669432,876599951,578728058,-155885659,340908568,-908515936,-622852726,-407540947,761462838,280187255,353982915,-639066343,548672548,-88806195,-862930037,819234423,53550199,-940594263,607432977,-838113705,546393069,-748464529,-603908105,761191477,-685135308,-939096164,289968551,-274368926,627489741,-129950639,526541418,-998959635,680699219,-830622102,-539831497,144706702,-663420290,597023892,-927949475,511345307,703833480,-971466730,865836780,803106779,938713922,-835576776,-964084434,-872665913,-649961432,-755568502,901179644,203662955,-606323819,-291808559,105797930,5393975,-233292724,-635004386,-824301312,458903712,471469980,165707951,300713196,434243484,445109704,485743210,-467440635,-576962152,-71776126,699089559,-676186930,-858979125,-580000914,-72400483,521839522,-144978537,-275683044,-804856195,438893942,351728980,522138882,-657067668,381786162,-913171073,23239674,-876892496,-398533919,-104808496,-120036921,911970734,-719075751,-538375285,-952200054,562075367,682807050,969907830,558004568,836614822,246365289,-588649661,733542894,457150774,370186769,217536913,-813095725,382487447,397221964,416838067,-901018792,413735238,-878752094,-106804558,-131041244,-692361650,-733072476,-925666621,-720554873,-895801815,656320986,347420686,523579928,-617792639,218570661,-64118445,419811103,301802854,715152469,369457185,202542439,-734593012,-963109197,-462752235,479772423,414478163,-876669754,703973076,539351991,861247303,703758750,-479068157,95546336,288104492,149557557,133484880,752219838,437114830,673422542,-115568680,-815451598,634109543,-833569532,-104305046,-170040742,-542650172,707459027,-97401067,-119652590,-908619044,-701491659,-37387084,-61804013,-433892163,-866856943,-897534998,499623816,250026042,224679766,729091792,68409376,547877590,-330262956,230070389,54818720,438680575,-622927556,-629497677,479977582,830294520,-302248826,606127243,-93263895,231113176,286747945,-380811864,726017751,-677460971,-744072237,-519264022,-659467505,223225423,-332507149,819018758,-634631918,-228828549,-510362829,-535567112,846539815,-402528949,-599960556,243895212,643883858,-939505526,157248275,497372630,107458694,371365419,-197023161,-434479890,-898745370,-591642239,-282208817,-932135434,-260487951,516252519,634633913,-657677369,-620075028,158405370,64679569,732951246,651348980,360480346,455292691,-789248832,745941746,-77257201,-264101424,236271,-628824856,322487433,690930779,62542531,854486085,-688698151,-288160547,-804921011,-274227214,-428698862,851834928,518605576,-597252167,-16223557,253547309,-818173504,-957468645,-256773948,998887584,-901986744,-391248087,14121523,-975552360,-559046249,792673385,697746725,565088549,296033721,945795972,-497515711,-637504747,-177165993,345182971,-464969905,140601260,988265017,-141604894,-236706431,-87202592,457718792,-460379878,-193937097,-678709529,374735915,235862630,-373858004,-186557339,-227057195,-994724420,-776722397,742930579,-360522741,322360328,354141861,549287056,501772557,-399560776,-464839723,674788378,158735107,-878786073,977997336,-444903667,273878084,785006373,-11800856,688498033,141759928,-494101049,-315812970,-118617752,-742638014,-734659089,-971799410,-109839008,806154848,-446339706,651876309,-239322208,-184380261,-32385123,-828728108,-595996078,-357068467,340817055,-10996973,-576895572,879271551,191971808,154908275,579702092,370639602,67722714,351722120,-778208442,426980808,51431648,-881021423,23643584,-23954092,705424838,-572103555,158251540,772677881,-215713408,-654428719,640461827,462569777,-97633399,780185167,-396028681,-165592616,-216674888,-489611098,-667032048,-686947002,-761349233,-305860355,9575608,-609280113,527620128,672468823,-317822286,770933821,554776499,-845582943,603074508,-804094442,484385619,-116121336,675196552,351772349,63294874,690711831,100171853,-98908480,374665374,-320186485,-787330523,-343465958,303336691,-377260063,-492219034,606729398,568980949,-888440633,747226290,-369778058,77448608,444748561,673726168,-360311792,-168819777,-817530527,-317254092,-816892919,-454267701,-16759878,-591327833,-479600293,215545092,524229440,-814944656,-404865448,-916203887,-142940941,-975981997,555083065,325145236,220113463,332355571,77099856,-278983797,695833527,777795268,-262447007,-285180439,408111705,665679429,453620764,-600924768,394492215,6015249,391698822,-298867561,466685954,104226929,-938868802,125059194,-878153798,584393345,-783876720,216389124,925316340,-517974564,803657087,-291364542,-85167610,158493420,323130477,-115369010,-835724368,-261105238,920645899,478278591,395009114,200296504,-858679200,228091279,541234780,-454023195,-129822649,-153615153,116773480,-314418573,530928818,-186849170,496194055,-1139500,247586013,-986145729,-535596291,520382913,951988613,566518840,-770681417,720005068,-26639643,494954047,-104851775,-464268835,-320929871,401883528,-704200172,-217829647,-915732750,555077638,48470719,-669135874,586868684,-635346972,-753372183,41992062,-769179836,-660880102,13980102,-251688712,176020046,741472381,-675191294,-123226699,600552875,-499261904,-753503015,247155997,-665931123,-371799311,531940202,-944185070,-306040771,880122343,61158131,-252439174,-504981236,-435613922,324837948,-101997528,712893232,948075532,755815140,-267381965,-617402182,-983411345,-8884913,934899763,-685912875,-694986776,718685755,-544779422,-869060013,754583673,454248942,639202910,651459603,331133489,-83309795,-208718895,-583818824,157167073,640896477,671148657,-339470176,394672499,446161475,-856730667,-400302190,-569721554,-826147949,435913968,929665575,-550246674,102595566,643200308,-27414690,176941844,-512465220,-162814763,965402345,469287471,216069410,-14893388,-866303245,599529682,233002189,364998644,606339403,22137504,-557667330,-478411626,-897005219,865627528,-277543120,-148013737,108647284,364579069,391484737,946606048,-106022385,835606333,-2922170,-473336249,-791552404,156565488,754036907,487587626,-581019557,-346045347,-51785558,-442292753,-560834449,156407452,678161281,163297258,108627623,147411969,967358532,691329851,-59035699,958743901,16389320,217500128,-688306393,-576742848,-867515992,-279542402,-876323639,-329438147,226504957,-868984903,-191596643,227657061,-411100094,-556542410,935283360];
    pr(subArrayRanges(nums))
    pr(subArrayRanges(nums2))
    pr(subArrayRanges(nums3)) // 59
    pr(subArrayRanges(debug1)) // 450924221772290
};

main()